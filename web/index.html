<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>AI Capstone Chat</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#f5f7fa}
header{background:#0b1e3c;color:#fff;padding:14px 18px}
main{max-width:960px;margin:20px auto;background:#fff;border-radius:12px;padding:16px 18px;box-shadow:0 2px 10px rgba(0,0,0,.06)}
.row{display:flex;gap:10px;margin-bottom:10px}.row input[type=file]{flex:1}
.chat{border:1px solid #e3e6ea;border-radius:8px;padding:10px;height:360px;overflow:auto;background:#fafbfc}
.bubble{padding:8px 10px;margin:6px 0;border-radius:8px;max-width:80%}.me{background:#e8f4ff;align-self:flex-end}.bot{background:#f1f3f5}
.controls{display:flex;gap:10px;margin-top:8px}textarea{flex:1;padding:8px;font-size:15px;height:70px}
button{background:#0070c0;color:#fff;border:0;border-radius:8px;padding:10px 14px;font-weight:600;cursor:pointer}
button:disabled{opacity:.6;cursor:not-allowed}.docs{font-size:13px;color:#333}
</style></head>
<body><header><strong>AI Capstone Chat</strong></header>
<main>
<div class="row"><input id="file" type="file" accept=".txt,.md"/><button onclick="ingest()">Ingest</button><button onclick="listDocs()">List Docs</button></div>
<div class="docs" id="docs"></div><div class="chat" id="chat"></div>
<div class="controls"><textarea id="msg" placeholder="Ask a question..."></textarea><button id="send" onclick="send()">Send</button></div>
</main>
<script>
const chatEl=document.getElementById('chat');const docsEl=document.getElementById('docs');const msgEl=document.getElementById('msg');const sendBtn=document.getElementById('send');
function addBubble(text,who){const d=document.createElement('div');d.className='bubble '+(who==='me'?'me':'bot');d.textContent=text;chatEl.appendChild(d);chatEl.scrollTop=chatEl.scrollHeight;}
async function ingest(){const f=document.getElementById('file').files[0];if(!f)return alert('Choose a .txt or .md file');const fd=new FormData();fd.append('file',f);const res=await fetch('/ingest',{method:'POST',body:fd});const j=await res.json();alert('Ingested: '+JSON.stringify(j));}
async function listDocs(){const res=await fetch('/docs');const j=await res.json();docsEl.textContent='Indexed docs: '+j.join(', ');}
async function send(){const text=msgEl.value.trim();if(!text)return;addBubble(text,'me');msgEl.value='';sendBtn.disabled=true;try{const res=await fetch('/query',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:text})});const j=await res.json();addBubble(j.answer,'bot');}catch(e){addBubble('Error: '+e.toString(),'bot');}finally{sendBtn.disabled=false;}}
</script></body></html>
